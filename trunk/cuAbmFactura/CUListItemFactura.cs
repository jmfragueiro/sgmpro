///////////////////////////////////////////////////////////
//  CUListItemFactura.cs
//  Clase de implementación de CUListItemFactura.
//  Generated by Fito
//  Created on:      08-abr-2009 11:32:54
//  Original author: Fito
///////////////////////////////////////////////////////////
using scioControlLibrary;
using scioPersistentLibrary.criterios;
using scioPersistentLibrary.interfases;
using scioPersistentLibrary.orden;
using sgmpro.dominio.caja;

namespace cuAbmFactura {
    /// <summary>
    /// Esta clase hereda de CUListGenerico y se encarga de gestionar
    /// PanelListABMV para la entidad Deuda para las deudas asociadas 
    /// a un pago.
    /// </summary>
    public class CUListItemFactura : CUListGenerico<ItemFactura> {
        /// <summary>
        /// Constructor de la clase que inicializa elementos internos.
        /// </summary>
        public CUListItemFactura() {
            ColsInvisibles.Add("Factura");
            Ordenamiento.Add(Orden.Asc("Numero"));
        }

        #region IControladorListable Members
        /// <summary>
        /// Implementación del método de la interfaz.
        /// </summary>
        public override ICriterioConsulta getFiltroMaster() {
            if (ObjetoMaster is Factura)
                return Criterios.Igual("Factura", ObjetoMaster);
            return base.getFiltroMaster();
        }

        /// <summary>
        /// Implementación del método de la interfaz.
        /// </summary>
        public override void listAdd(params object[] parametros) {
            if (Padre != null)
                ((PanelAbmvFactura) Padre).reiniciarItem(null);
        }

        /// <summary>
        /// Implementación del método de la interfaz.
        /// </summary>
        public override void listEdit(params object[] parametros) {
            if (Padre != null)
                ((PanelAbmvFactura) Padre).reiniciarItem(_panelListado.getObjetoActual());
            // Una vez que cargo el item en los cuadros de edición, elimina
            // el mismo del panel de listado
            _panelListado.getObjetoActual().delete();
            ((PanelAbmvFactura)Padre).refrescarTotales();
        }

        /// <summary>
        /// Implementación del método de la interfaz.
        /// </summary>
        public override void listRemove(params object[] parametros) {
            if (Padre != null) {
                _panelListado.getObjetoActual().delete();
                ((PanelAbmvFactura) Padre).refrescarTotales();
                ((PanelAbmvFactura) Padre).reiniciarItem(null);
            }
        }
        #endregion
    }
}