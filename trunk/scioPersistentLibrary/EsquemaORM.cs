///////////////////////////////////////////////////////////
//  EsquemaModelo.cs
//  Clase de creación, configuracion y carga inicial del 
//  esquema en el motor de persistencia.
//  Generated by Fito
//  Created on:      08-abr-2009 11:32:54
//  Original author: Fito
///////////////////////////////////////////////////////////
using NHibernate.Cfg;
using NHibernate.Tool.hbm2ddl;
using scioPersistentLibrary.interfases;

namespace scioPersistentLibrary {
    /// <summary>
    /// Esta clase se utiliza para generar y cargar el modelo de objetos
    /// dentro de un esquema ORM. 
    /// </summary>
    public class EsquemaORM {
        public static IHelperORM Helper { get; set; }

        /// <summary>
        /// Este método regenera (borrando todas las tablas) el esquema de la aplicación.
        /// </summary>
        public static void GenerarEsquema(params object[] parametros) {
            Configuration cfg = (Configuration)parametros[0];
            new SchemaExport(cfg).Execute(false, true, false);

            // Si hay un helper lo utiliza (por las dudas si hay manejos propios)
            if (Helper != null)
                Helper.generarEsquema(parametros);
        }

        /// <summary>
        /// Este método carga datos de prueba en el esquema de la aplicación.
        /// </summary>
        public static void CargarEsquema() {
            // Si hay un helper lo utiliza (por las dudas si hay manejos propios)
            if (Helper != null)
                Helper.cargarEsquema();
        }
    }
}