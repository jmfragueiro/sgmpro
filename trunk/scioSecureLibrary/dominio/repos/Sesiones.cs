///////////////////////////////////////////////////////////
//  Sesiones.cs
//  Implementation of the Class Sesiones
//  Generated by Enterprise Architect
//  Created on:      13-abr-2009 17:23:42
//  Original author: Fito
///////////////////////////////////////////////////////////
using System;
using System.Collections.Generic;
using scioPersistentLibrary.acceso;
using scioPersistentLibrary.criterios;
using scioPersistentLibrary.orden;

namespace scioSecureLibrary.dominio.repos {
    /// <summary>
    /// Esta clase representa al Repositorio de persistencia
    /// de Nhibernate para la entidad Sesion del sistema.
    /// </summary>
    public class Sesiones : RepositorioPersistente<Sesion> {
        /// <summary>
        /// Este método devuelve todas las sesiones de un usuario
        /// en un día detemrminado. Devuelve la lista ordenada por 
        /// fecha de logon.
        /// </summary>
        /// <param name="usuario">
        /// El usuario del que se busca la lista de sesiones.
        /// </param>
        /// <param name="dia">
        /// El día para el cual se quiere la lista de sesiones.
        /// </param>
        /// <returns>
        /// La lista de sesiones del usuario deseado ordenada por
        /// fecha de logon.
        /// </returns>
        public static IList<Sesion> GetByUsuarioDia(Usuario usuario, DateTime dia) {
            return GetByCriteria(true,
                new[] {
                    Criterios.Igual("Usuario", usuario),
                    Criterios.MayorIgual("FechaLogon", dia.Date),
                    Criterios.Menor("FechaLogon", dia.AddDays(1).Date)
                },
                new[] {Orden.Asc("FechaLogon")});
        }
    }
}