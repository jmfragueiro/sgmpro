///////////////////////////////////////////////////////////
//  CUListDeudas.cs
//  Clase de implementación de CUListDeudas.
//  Generated by Fito
//  Created on:      08-abr-2009 11:32:54
//  Original author: Fito
///////////////////////////////////////////////////////////
using scioControlLibrary;
using scioControlLibrary.enums;
using scioPersistentLibrary.criterios;
using scioPersistentLibrary.interfases;
using sgmpro.dominio.configuracion;

namespace cuAbmDeuda {
    /// <summary>
    /// Esta clase hereda de CUListGenerico y se encarga de 
    /// gestionar un PanelListABMV para la entidad Deuda.
    /// </summary>
    public class CUListDeudas : CUPreviewGenerico<Deuda> {
        /// <summary>
        /// Constructor de la clase que inicializa elementos internos.
        /// </summary>
        public CUListDeudas() {
            ControlEditable = new CUAbmDeuda();
            ColsInvisibles.Add("Imputaciones");
            ColsInvisibles.Add("CapitalO");
            ColsInvisibles.Add("InteresO");
            ColsInvisibles.Add("HonorO");
            ColsInvisibles.Add("GastosO");
            ModoListado = EModoListado.RELACIONAL;
        }

        #region IControladorListable Members
        /// <summary>
        /// Implementación del método de la interfaz.
        /// </summary>
        protected override PanelPreview<Deuda> crearPanelPreview() {
            return new PanelPreviewDeuda(ControlEditable);
        }

        /// <summary>
        /// Implementación del método de la interfaz.
        /// </summary>
        public override ICriterioConsulta getFiltroMaster() {
            if (ObjetoMaster is Convenio)
                return Criterios.And(
                    Criterios.Igual("Convenio", ObjetoMaster),
                    Criterios.EsNulo("Cuenta"));

            if (ObjetoMaster is Cuenta)
                return Criterios.And(
                    Criterios.Igual("Cuenta", ObjetoMaster),
                    Criterios.EsNulo("Convenio"));

            return base.getFiltroMaster();
        }
        #endregion
    }
}